# MVVM

 소프트웨어 아키텍쳐 패턴으로 GUI(뷰)의 개발을 비즈니스 로직 또는 백엔드 로직(모델)로부터 분리시켜 뷰가 어느 특정한 모델 플랫폼에 종속되지 않아 모듈화가 쉬운 구조

뷰 모델은 값 변환기인데, 이는 뷰 모델이 모델에 있는 데이터 객체를 노출(변환)하는 책임을 지기 대문에 객체를관리하고 표현하기 쉬워진다는 것을 의미한다. 이러한 점에서 뷰 모델은 모델에 가깝다. 모든 뷰들은 디스플레이 로직을 제외한 대부분의 것들을 처리한다. 뷰 모델은 백엔드 로직에 대한 접근과 그 주변부의 뷰에서 지원하는 유즈케이스 집합으로 구성되도록 중재자 패턴으로 구현할 수도 있다.

## Model

실제 상태 내용을 표현하는, 도메인 모델을 참조하거나(객체 지향 접근법), 또는 내용을 표현하는, 데이터 접근 계층을 참조한다.(데이터 중심 접근법)

## View

사용자가 화면에서 보는 것들에 대한 구조, 배치, 그리고 외관에 해당한다. 모델을 보여서 표현하고 사용자와 뷰의 상호 작용(클리, 키보드, 동작 등)을 수신하여, 이에 대한 처리를 뷰와 뷰 모델의 연결을 정의하고 있는 (속성, 이벤트 콜백 함수 등의) 데이터 바인딩을 통하여 뷰 모델로 전달한다.

## View Model

뷰 모델은 공용 속성과 공용 명령을 노출하는 뷰에 대한 추상화(abstraction)이다. MVC 패턴의 controller나 MVP 패턴의 presenter를 대신하여 MVVM은 바인더를 가지고 있는데, 이는 뷰 모델에 있는 뷰에 연결된 속성과 뷰 사이의 통신을 자동화 한다. 뷰 모델은 모델에 있는 데이터의 상태라고 설명할 수 있다.

뷰 모델과 MVP 패턴에 있는 프리젠터와의 주요한 차이점은 프리젠터는 뷰에 대한 참조를 가지고 있는 반면, 뷰 모델은 그렇지 않다는 것이다. 그 대신, 뷰는 뷰 모델의 속성에 직접 연결된(bind) 채로 업데이트를 주고 받는다. 효율적으로 작동하려면, 바인딩 기술 또는 바인딩을 하는 상용구 코드(boilerplate code)의 자동 생성이 필수이다.

## Binder

MVVM 패턴에서는 선언적인 데이터와 명령 - 바인딩(명령 - 연결)이 내재되어 있다. 마이크로소프트 솔루션 스택에서, 바인더는 XAML이라는 마크업 언어이다. 바인더는 뷰 모델과 뷰의 동기화를 위해 상용구 로직을 작성해야 하는 의무에서 개발자를 해방시켜 준다. 마이크로소프트 스택을 사용하지 않고 구현한다면, 선언적인 데이터 바인딩 기술이 있어야 이 패턴을 만들 수 있으며, 바인더가 없다면, 그 대신 일반적인 MVP나 MVC를 사용해야 하고 더 많은 상용구 코드를 작성하게 (혹은 다른 도구로 생성하게) 될 것이다.



## 사용 이유

보통 개발을 하다보면 Activity Class에 모든 앱 동작 코드를 다 집어넣는 경우가 많고, 체계적인 구조가 없기 때문에 추후에 유지 보수가 어렵다는 단점을 가지고 있는데, MVVM 패턴을 사용하면 
View의 역할을 Activity / Fragment가 하게 되고 사용자의 Action을 받게 된다.(텍스트 입력, 버튼 터치 등)
View의 역할은 ViewModel의 데이터를 관찰하여 UI를 갱신하는 역할도 있다.

ViewModel은 View가 요청한 데이터를 Model에게 요청을 하고 Model로부터 요청한 데이터를 받는 역할을 한다.

Model은 ViewModel이 요청한 데이터를 반환하고, Room, Realm과 같은 DB의 사용이나 Retrofit을 통한 백엔드 API 호출(네트워킹)과 같은 역할을 한다.

정리하면, View가 필요로 하는 데이터는 ViewModel이 가지고 있고, View는 그 정보가 필요하기 때문에 ViewModel이 가지고 있는 데이터를 관찰(Observing)한다.
그 덕분에 View는 DB에 직접 접근하지 않고 UI의 업데이트에만 집중할 수 있고 데이터의 변화에 더욱 능동적으로 움직일 수 있게 된다.



## 장점

- **View가 ViewModel의 데이터를 관찰하고 있으므로 UI업데이트가 간편**하다.
- ViewModel이 **데이터를 홀드하고 있으므로 Memory Leak 발생 가능성이 배제**된다.
  (View가 직접 Model에 접근하지 않아 **Activity / Fragment 라이프 사이클에 의존하지 않기 때문에**)
- 기능별 모듈화가 잘 되어 유지 보수에 용이하다.



## 단점

- 구조가 복잡하다.
- 그 때문에 진입장벽이 상당하다.



## Jetpack

안드로이드 앱 구성의 권장사항 지침과 더불어 안드로이드 스튜디오, AAC(Android Architecture Component)와 안드로이드 지원 라이브러리로 구성된다. 안드로이드 아키텍쳐 컴포넌트는 아키텍쳐 지침의 핵심 원리를 준수하면서 안드로이드 앱을 개발할 때 더 빠르고 쉽게 공통 작업을 수행할 수 있도록 설계되어있다.

AAC의 ViewModel, LiveData 컴포넌트를 사용해 MVVM 모델을 비교적 쉽게 구현할 수 있게 되었다.